<section>
    <nz-modal [(nzVisible)]="isVisible" [nzTitle]="modalTitle" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()"
        [nzFooter]="modalFooter">
        <div *ngIf="modalMode === 'modalAccept'">
            <p>审核通过</p>
            <p>是否确认审核通过？</p>
            <p>审核通过后无法撤回，请谨慎操作。</p>
        </div>
        <div *ngIf="modalMode === 'modalDecline'">
            <p>审核拒绝</p>
            <textarea class="modalDeclineInput" #declineInput></textarea>
        </div>
        <div *ngIf="modalMode === 'modalResult'">
            <p *ngIf="requestExecuteStatus.success">审核更改成功</p>
            <p *ngIf="requestExecuteStatus.fail">审核失败<br />
                错误码：{{errorMessage}}
            </p>
        </div>
        <ng-template #modalFooter>
            <div *ngIf="!requestExecuteStatus.success">
                <button nz-button nzType="default" (click)="handleCancel()">返回</button>
                <button nz-button nzType="primary" (click)="handleOk()" [nzLoading]="isModalLoading">确认</button>
            </div>
            <div *ngIf="requestExecuteStatus.fail">
                <button nz-button nzType="primary" (click)="handleCancel()">确认</button>
            </div>
        </ng-template>

    </nz-modal>

    <div class="detail-title">
        <div class="detail-title-left">
            <button nz-button nzType="primary" (click)="backTolist()"><i nz-icon nzType="arrows-alt"></i>返回</button>
            <p>审核管理-作品审核</p>
        </div>
        <div *ngIf="auditType === 'auditPending'">
            <button class="first-button" nz-button nzType="primary"
                (click)="showAuditModal('modalAccept')">审核通过</button>
            <button nz-button nzType="primary" (click)="showAuditModal('modalDecline')">审核拒绝</button>
        </div>
        <div *ngIf="auditType === 'auditAccepted'">
            <button nz-button nzType="primary" (click)="showAuditModal('modalCancelPublish')">撤销发布</button>
        </div>
    </div>

    <div class="review-officer" *ngIf="auditType === 'auditAccepted'">
        <div class="review-officer-title">审核信息</div>
        <nz-descriptions class="review-officer-content" [nzColumn]="4" *ngFor="let item of artWorkInfo.auditlist">
            <nz-descriptions-item nzTitle="审核人">{{item.username}}</nz-descriptions-item>
            <nz-descriptions-item nzTitle="审核时间">{{moment(item.audittime).format("YYYY/MM/DD")}}</nz-descriptions-item>
            <nz-descriptions-item nzTitle="审核结果">{{item.check_state === 1? '审核通过':'审核拒绝'}}</nz-descriptions-item>
            <nz-descriptions-item nzTitle="拒绝理由">{{item.description}}</nz-descriptions-item>
        </nz-descriptions>
    </div>
    <div class="review-information">
        <div class="review-information-title">基础信息</div>
        <div class="review-information-content">
            <nz-descriptions [nzColumn]="4">
                <nz-descriptions-item nzTitle="作品名称">{{artWorkInfo.baseinfo.name}}</nz-descriptions-item>
                <nz-descriptions-item nzTitle="作品ID">{{workid}}</nz-descriptions-item>
                <nz-descriptions-item nzTitle="发布用户">{{artWorkInfo.baseinfo.author_name}}</nz-descriptions-item>
                <nz-descriptions-item nzTitle="用户ID">{{artWorkInfo.baseinfo.author_id}}</nz-descriptions-item>
            </nz-descriptions>

            <nz-descriptions [nzColumn]="4">
                <nz-descriptions-item nzTitle="提交时间">{{moment(artWorkInfo.baseinfo.publishtime).format("YYYY/MM/DD")}}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="作品分类">
                    {{artWorkInfo.baseinfo.type === 0? 'Live2D':'原画'}}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="作品类型" [ngSwitch]="artWorkInfo.baseinfo.state">
                    <p *ngSwitchCase="0">仅展示</p>
                    <p *ngSwitchCase="1">未出售</p>
                    <p *ngSwitchCase="2">已出售</p>
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="出售价格">{{artWorkInfo.baseinfo.price}}</nz-descriptions-item>
            </nz-descriptions>
        </div>
    </div>

    <div class="details">
        <div class="detail-title">

            详细信息
        </div>

        <div class="details-intro">
            <div>
                <p class="details-intro-p">
                    <svg viewBox="64 64 896 896" fill="currentColor" width="1em" height="1em" data-icon="snippets"
                        aria-hidden="true">
                        <path
                            d="M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z">
                        </path>
                    </svg>
                    作品介绍
                </p>
            </div>
            <div class="details-intro-content">
                {{artWorkInfo.baseinfo.description}}
            </div>
            <div>
                <svg viewBox="64 64 896 896" focusable="false" fill="currentColor" width="1em" height="1em"
                    data-icon="copyright" aria-hidden="true">
                    <path
                        d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm5.6-532.7c53 0 89 33.8 93 83.4.3 4.2 3.8 7.4 8 7.4h56.7c2.6 0 4.7-2.1 4.7-4.7 0-86.7-68.4-147.4-162.7-147.4C407.4 290 344 364.2 344 486.8v52.3C344 660.8 407.4 734 517.3 734c94 0 162.7-58.8 162.7-141.4 0-2.6-2.1-4.7-4.7-4.7h-56.8c-4.2 0-7.6 3.2-8 7.3-4.2 46.1-40.1 77.8-93 77.8-65.3 0-102.1-47.9-102.1-133.6v-52.6c.1-87 37-135.5 102.2-135.5z">
                    </path>
                </svg>
                版权声明
            </div>
            <div>
                {{artWorkInfo.baseinfo.copyright}}
            </div>
            <div class="image-upload">
                <svg viewBox="64 64 896 896" fill="currentColor" width="1em" height="1em" data-icon="file-image"
                    aria-hidden="true">
                    <path
                        d="M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z">
                    </path>
                </svg>
                上传图片</div>
            <div class="details-image">
                <img *ngFor="let item of artWorkInfo.baseinfo.assets" [src]="item">
            </div>

            <div class="details-download">
                <p class="title">
                    <svg viewBox="64 64 896 896" focusable="false" fill="currentColor" width="1em" height="1em"
                        data-icon="file" aria-hidden="true">
                        <path
                            d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z">
                        </path>
                    </svg>
                    源文件</p>
                <div class="download">
                    <div (click)="downloadImage(item)" *ngFor="let item of artWorkInfo.baseinfo.assets">{{item}}</div>
                    <!-- <a [href]="item" *ngFor="let item of artWorkInfo.baseinfo.assets">{{item}}</a> -->
                </div>

            </div>

            <div class="tag">
                <p class="title">
                    <svg viewBox="64 64 896 896" focusable="false" fill="currentColor" width="1em" height="1em"
                        data-icon="tags" aria-hidden="true">
                        <path
                            d="M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm62.6-651.7l224.6 19 19 224.6L477.5 694 233.9 450.5l311.9-311.9zm60.16 186.23a48 48 0 1067.88-67.89 48 48 0 10-67.88 67.89zM889.7 539.8l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z">
                        </path>
                    </svg>
                    标签
                </p>

                <div>
                    <nz-tag *ngFor="let item of artWorkInfo.baseinfo.tag">{{item.name}}</nz-tag>
                </div>
            </div>
            <div>封面图</div>
            <img class="cover-image" [src]="artWorkInfo.baseinfo.cover">
        </div>

    </div>
</section>